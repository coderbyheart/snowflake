var x=Object.defineProperty,C=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var b=(i,t,o)=>t in i?x(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o,c=(i,t)=>{for(var o in t||(t={}))M.call(t,o)&&b(i,o,t[o]);if(y)for(var o of y(t))z.call(t,o)&&b(i,o,t[o]);return i},d=(i,t)=>C(i,I(t));import{j,a as w,F,D as B,l as p,b as S,y as f,s as G,S as A}from"./vendor.af4d191c.js";const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerpolicy&&(e.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?e.credentials="include":n.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(n){if(n.ep)return;n.ep=!0;const e=o(n);fetch(n.href,e)}};E();const l=j,s=w,$=F,v=B({setSVG:()=>{},download:()=>{}}),L=()=>S(v),V=({children:i})=>{const[t,o]=p(),r=()=>{var a,u;const n=new File([(t==null?void 0:t.current).outerHTML],`${(u=(a=document.location.hash)==null?void 0:a.substring(1))!=null?u:"snowflake"}.svg`),e=document.createElement("a");e.style.display="none",e.href=URL.createObjectURL(n),e.download=n.name,document.body.appendChild(e),e.click(),setTimeout(()=>{var h;URL.revokeObjectURL(e.href),(h=e.parentNode)==null||h.removeChild(e)},0)};return l(v.Provider,{value:{download:r,setSVG:o},children:i})},D=i=>[...i.branches.map(({position:t,length:o})=>[t,o].join(":"))].join(","),H=i=>({branches:i.split(",").map(o=>{const[r,n]=o.split(":");return{position:parseInt(r,10),length:parseInt(n,10)}})}),m=async(i,t,o)=>{const n=new TextEncoder().encode(o),e=await crypto.subtle.digest("SHA-1",n),u=Array.from(new Uint8Array(e)).map(h=>h.toString(16).padStart(2,"0")).join("");return Math.ceil(i+Math.abs(parseInt(u,16)%(t-i)))},k=i=>{var o,r;const t=(r=(o=document.location.hash)==null?void 0:o.substring(1))!=null?r:"";return t.length<=1?{branches:[...Array(Math.ceil(Math.random()*i.maxBranches)).keys()].map(()=>({position:Math.ceil(Math.random()*i.size),length:Math.ceil(Math.random()*i.size)}))}:H(t)},O=({seed:i,drawSettings:t})=>{const[o,r]=p(k(t)),n=()=>{r(k(t))};return f(()=>(window.addEventListener("hashchange",n),()=>{window.removeEventListener("hashchange",n)}),[]),f(()=>{document.location.hash=D(o)},[o]),f(()=>{i.length!==0&&Promise.all([m(1,t.maxBranches,`${i} branches`).then(e=>Promise.all([...Array(e).keys()].map((a,u)=>Promise.all([m(0,t.size,`${i} branch ${u} Length`),m(0,t.size,`${i} branch ${u} Position`)]).then(([h,g])=>({length:h*Math.sqrt(1-g/t.size),position:g})))))]).then(([e])=>{const a=[];for(const{position:u,length:h}of e)a.push({length:h,position:u});r({branches:a})})},[i,t]),l(P,{drawSettings:t,viewBoxSize:2e3,branches:o.branches})},P=({drawSettings:i,viewBoxSize:t,branches:o})=>{const r=G(null),{setSVG:n}=L();n(r);const e=[];return i.border&&e.push({fill:"transparent","stroke-width":i.strokeWidth,stroke:i.borderColor}),e.push({fill:i.fillColor}),l("svg",{class:`snowflake ${i.rotate&&"rotate"}`,viewBox:`0 0 ${t} ${t}`,title:"Snowflake",ref:r,children:e.map(a=>[0,1,2,3,4,5].map(u=>l("g",{transform:`translate(${t/2},${t/2}) rotate(${u*60})`,children:l(N,{size:i.size,branches:o,branchWidth:i.branchWidth/2,pathProps:a})})))})},N=({size:i,branches:t,branchWidth:o,pathProps:r})=>{const n=t.sort(({position:e},{position:a})=>e-a)[0].position;return s($,{children:[l("path",d(c({},r),{d:[`M${n} ${o}`,`L${i+n} ${o}`,`L${i+n+o/(3/2)} 0`,`L${i+n} -${o}`,`L${n} -${o}`,"z"].join(" ")})),l("path",d(c({},r),{d:[`M0 ${o}`,`L${n} ${o}`,`L${n} -${o}`,`L0 -${o}`,"z"].join(" "),transform:`rotate(60,${n},0)`})),t.map(e=>s($,{children:[l("path",d(c({},r),{d:[`M${e.position} ${o}`,`L${e.position+e.length} ${o}`,`L${e.position+e.length+o/(3/2)} 0`,`L${e.position+e.length} -${o}`,`L${e.position} -${o}`,"z"].join(" "),transform:`rotate(45,${e.position},0) `})),l("path",d(c({},r),{d:[`M${e.position} ${o}`,`L${e.position+e.length} ${o}`,`L${e.position+e.length+o/(3/2)} 0`,`L${e.position+e.length} -${o}`,`L${e.position} -${o}`,"z"].join(" "),transform:`rotate(-45,${e.position},0) `}))]}))]})},R=()=>{const{download:i}=L(),[t,o]=p(""),[r,n]=p({strokeWidth:20,branchWidth:50,maxBranches:6,rotate:!0,size:500,border:!0,fillColor:"white",borderColor:"black"});return s($,{children:[l(O,{seed:t,drawSettings:r}),l("p",{children:l("button",{type:"button",onClick:()=>{i()},children:"Download SVG"})}),s("form",{children:[s("fieldset",{children:[l("p",{children:l("button",{type:"button",onClick:()=>{document.location.hash=""},children:"Generate a new \u2744\uFE0F"})}),s("p",{children:[l("span",{children:"or"})," ",l("label",{for:"seed",children:"type some text to generate a new \u2744\uFE0F:"}),l("input",{id:"seed",type:"text",value:t,onInput:e=>{o(e.target.value)},autoComplete:"off"})]})]}),s("fieldset",{children:[s("p",{children:[s("label",{for:"branchWidth",children:["Branch width (",r.branchWidth,")"]}),l("input",{type:"range",id:"branchWidth",min:1,max:250,value:r.branchWidth,onInput:e=>{n(d(c({},r),{branchWidth:e.target.value}))}})]}),s("p",{children:[s("label",{for:"strokeWidth",children:["Stroke width (",r.strokeWidth,")"]}),l("input",{type:"range",id:"strokeWidth",min:1,max:100,value:r.strokeWidth,onInput:e=>{n(d(c({},r),{strokeWidth:e.target.value}))}})]}),s("p",{children:[s("label",{for:"maxBranches",children:["Maximum number of branches (",r.maxBranches,")"]}),l("input",{type:"range",id:"maxBranches",min:1,max:20,value:r.maxBranches,onInput:e=>{n(d(c({},r),{maxBranches:parseInt(e.target.value,10)}))}})]}),s("p",{children:[s("label",{for:"size",children:["Size (",r.size,")"]}),l("input",{type:"range",id:"size",min:1,max:2e3,value:r.size,onInput:e=>{n(d(c({},r),{size:parseInt(e.target.value,10)}))}})]}),s("p",{children:[l("label",{for:"rotate",children:"Rotate?"}),l("input",{type:"checkbox",id:"rotate",checked:r.rotate,onInput:e=>{n(d(c({},r),{rotate:e.target.checked}))}})]}),s("p",{children:[l("label",{for:"border",children:"Border?"}),l("input",{type:"checkbox",id:"border",checked:r.border,onInput:e=>{n(d(c({},r),{border:e.target.checked}))}})]}),s("p",{children:[l("label",{for:"fillColor",children:"Fill color"}),l("input",{type:"color",id:"fillColor",value:r.fillColor,onChange:e=>{n(d(c({},r),{fillColor:e.target.value}))}})]}),l("p",{children:["#58ebf7","#4b4afd","#24c3f7","#10f6fd","#177dcb","#15649b","#73726e","#d1d960","#fce151","#fd9c5b","#fb6c5b","#fb5cac","#fc30e1"].map(e=>l("button",{type:"button",onClick:()=>{n(d(c({},r),{fillColor:e}))},style:{backgroundColor:e},children:e}))}),s("p",{children:[l("label",{for:"borderColor",children:"Border color"}),l("input",{type:"color",id:"borderColor",value:r.borderColor,onChange:e=>{n(d(c({},r),{borderColor:e.target.value}))}})]})]})]})]})};A(l(V,{children:l(R,{})}),document.getElementById("root"));
